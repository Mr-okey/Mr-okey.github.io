<template>
    <div class="deviceSVG">
        <!-- ML -->
        <svg v-show="currDeviceIndex === 0" width="276" height="276" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path ref="mlPath"
                d="M7.00001 4.5C6.46801 4.49985 5.94553 4.64117 5.48615 4.90948C5.02676 5.17778 4.64698 5.56343 4.38575 6.02687C4.12451 6.49032 3.99121 7.0149 3.99952 7.54684C4.00782 8.07877 4.15743 8.59894 4.43301 9.054C3.74855 9.18625 3.13149 9.55267 2.68776 10.0903C2.24404 10.628 2.00134 11.3034 2.00134 12.0005C2.00134 12.6976 2.24404 13.373 2.68776 13.9107C3.13149 14.4483 3.74855 14.8147 4.43301 14.947M7.00001 4.5C7.00001 3.83696 7.2634 3.20107 7.73224 2.73223C8.20108 2.26339 8.83697 2 9.50001 2C10.1631 2 10.7989 2.26339 11.2678 2.73223C11.7366 3.20107 12 3.83696 12 4.5V19.5C12 20.163 11.7366 20.7989 11.2678 21.2678C10.7989 21.7366 10.1631 22 9.50001 22C8.83697 22 8.20108 21.7366 7.73224 21.2678C7.2634 20.7989 7.00001 20.163 7.00001 19.5C6.46816 19.5 5.94586 19.3587 5.48661 19.0904C5.02737 18.8222 4.64769 18.4367 4.38649 17.9734C4.12528 17.5101 3.99194 16.9857 4.00011 16.4539C4.00829 15.9221 4.15769 15.402 4.43301 14.947M7.00001 4.5C7.00001 5.318 7.39301 6.044 8.00001 6.5M4.43301 14.947C4.79189 14.3529 5.34568 13.9016 6.00001 13.67M19.25 4.75L17 7H15M19.25 19.25L17 17H15M19.25 12H15M18.5 4.75C18.5 4.94891 18.579 5.13968 18.7197 5.28033C18.8603 5.42098 19.0511 5.5 19.25 5.5C19.4489 5.5 19.6397 5.42098 19.7803 5.28033C19.921 5.13968 20 4.94891 20 4.75C20 4.55109 19.921 4.36032 19.7803 4.21967C19.6397 4.07902 19.4489 4 19.25 4C19.0511 4 18.8603 4.07902 18.7197 4.21967C18.579 4.36032 18.5 4.55109 18.5 4.75Z"
                stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <!-- Add other SVGs with ref attributes -->
        <!-- cloud -->
        <svg v-show="currDeviceIndex === 1" width="276" height="276" viewBox="0 0 24 24" fill="none">
            <path ref="cloudPath"
                d="M22 14.353C22 17.472 19.442 20 16.286 20H11M14.381 9.027C14.9936 8.81426 15.6375 8.70575 16.286 8.706C16.94 8.706 17.569 8.815 18.156 9.015M18.156 9.015C17.837 6.194 15.416 4 12.476 4C9.32 4 6.762 6.528 6.762 9.647C6.7617 10.3169 6.8816 10.9814 7.116 11.609M18.156 9.015C18.8307 9.24529 19.4562 9.60009 20 10.061M7.116 11.609C6.84249 11.5561 6.56458 11.5293 6.286 11.529C3.919 11.53 2 13.426 2 15.765C2 18.104 3.919 20 6.286 20H7M7.116 11.609C7.66922 11.7167 8.19588 11.9321 8.666 12.243"
                stroke="black" stroke-width="1.5" stroke-linecap="round" />
        </svg>

        <!-- python -->
        <svg v-show="currDeviceIndex === 2" width="276" height="276" viewBox="0 0 24 24" fill="none">
            <path ref="pythonPath"
                d="M12 7.5H7.5M7.5 7.5H5.978C5.171 7.5 4.345 7.688 3.848 8.324C3.318 9.003 2.75 10.159 2.75 12C2.75 13.84 3.318 14.997 3.848 15.676C4.345 16.312 5.171 16.5 5.978 16.5H7.5M7.5 7.5V5.978C7.5 5.171 7.688 4.345 8.324 3.848C9.003 3.318 10.159 2.75 12 2.75C13.84 2.75 14.997 3.318 15.676 3.848C16.312 4.345 16.5 5.171 16.5 5.978V7.5M12 16.5H16.5M16.5 16.5H18.021C18.828 16.5 19.655 16.312 20.151 15.676C20.682 14.997 21.25 13.841 21.25 12C21.25 10.16 20.682 9.003 20.152 8.324C19.655 7.688 18.828 7.5 18.022 7.5H16.5M16.5 16.5V18.021C16.5 18.828 16.312 19.655 15.676 20.151C14.997 20.682 13.841 21.25 12 21.25C10.16 21.25 9.003 20.682 8.324 20.152C7.688 19.655 7.5 18.828 7.5 18.022V16.5M16.5 7.5V10C16.5 10.5304 16.2893 11.0391 15.9142 11.4142C15.5391 11.7893 15.0304 12 14.5 12H9.5C8.96957 12 8.46086 12.2107 8.08579 12.5858C7.71071 12.9609 7.5 13.4696 7.5 14V16.5"
                stroke="black" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <!-- Mobile -->
        <svg v-show="currDeviceIndex === 3" width="145" height="276" viewBox="0 0 145 276" fill="none">
            <path ref="mobilePath"
                d="M49.8687 5.19336H32.7537C24.5531 5.19336 16.805 8.95278 11.7298 15.3943V15.3943C8.01065 20.1147 5.98828 25.9493 5.98828 31.9588V244.404C5.98828 250.443 8.067 256.297 11.8751 260.984V260.984C16.868 267.129 24.3642 270.697 32.282 270.697H107.824C115.299 270.697 122.533 268.057 128.251 263.242V263.242C135.406 257.217 139.535 248.34 139.535 238.986V37.3417C139.535 28.0295 135.497 19.1749 128.466 13.0689V13.0689C122.618 7.98999 115.133 5.19336 107.387 5.19336H97.9808M49.8687 5.19336V5.19336C49.8687 11.9207 55.3223 17.3742 62.0496 17.3742H85.8C92.5273 17.3742 97.9808 11.9207 97.9808 5.19336V5.19336M49.8687 5.19336H97.9808M56.808 11.8228H89.1911"
                stroke="#DFD1E1" stroke-width="10" />
        </svg>

        <!-- Laptop -->
        <svg v-show="currDeviceIndex === 4" width="348" height="248" viewBox="0 0 348 248" fill="none">
            <path ref="laptopPath"
                d="M11.6699 236.761H336.785M65.567 221.093H280.649C299.979 221.093 315.649 205.423 315.649 186.093V46.9097C315.649 27.5797 299.979 11.9097 280.649 11.9097H65.5669C46.2369 11.9097 30.5669 27.5797 30.5669 46.9096V186.093C30.5669 205.423 46.237 221.093 65.567 221.093Z"
                stroke="#DFD1E1" stroke-width="22" stroke-linecap="round" />
        </svg>

        <!-- Desktop -->
        <svg v-show="currDeviceIndex === 5" width="371" height="331" viewBox="0 0 371 331" fill="none">
            <path ref="desktopPath"
                d="M137.774 233.936H24.0158C17.3884 233.936 12.0158 228.564 12.0158 221.936V23.395C12.0158 16.7676 17.3884 11.395 24.0158 11.395H340.371C346.999 11.395 352.371 16.7676 352.371 23.395V221.936C352.371 228.564 346.999 233.936 340.371 233.936H225.172M137.774 233.936L129.877 274.944C128.452 282.345 134.123 289.213 141.66 289.213H221.494C229.055 289.213 234.732 282.304 233.266 274.886L225.172 233.936M137.774 233.936H181.473H225.172M10.9824 320.109H360.207"
                stroke="#DFD1E1" stroke-width="21" stroke-linecap="round" />
        </svg>

        <!-- Tablet -->
        <svg v-show="currDeviceIndex === 6" width="238" height="281" viewBox="0 0 238 281" fill="none">
            <path ref="tabletPath"
                d="M92.0814 246.88H144.488M20.7988 272.425H217.625C224.252 272.425 229.625 267.052 229.625 260.425V20.2813C229.625 13.6538 224.252 8.28125 217.625 8.28125H20.7988C14.1714 8.28125 8.79883 13.6538 8.79883 20.2812V260.425C8.79883 267.052 14.1714 272.425 20.7988 272.425Z"
                stroke="#DFD1E1" stroke-width="16" stroke-linecap="round" />
        </svg>
    </div>
</template>

<script>
import gsap from 'gsap'

export default {
    name: "animated-svg-devices",

    data() {
        return {
            currDeviceIndex: 0,
            pathRefs: ['mlPath', 'cloudPath', 'pythonPath', 'mobilePath', 'laptopPath', 'desktopPath', 'tabletPath',]
        }
    },

    methods: {
        animatePath(pathRef) {
            if (this.$refs[pathRef]) {
                const path = this.$refs[pathRef]
                const length = path.getTotalLength()

                // Reset path
                gsap.set(path, {
                    strokeDasharray: length,
                    strokeDashoffset: length,
                    opacity: 1,
                    scale: 1,
                    rotate: 0,
                })

                // Animate path
                gsap.to(path, {
                    strokeDashoffset: 0,
                    duration: 5,
                    ease: "power1.inOut"
                })
                gsap.to(path, {
                    rotate: 10,
                    duration: 1,
                    ease: "power1.inOut",
                    delay: 5,
                })
                gsap.to(path, {
                    scale: 1.2,
                    duration: 1,
                    opacity: 0,
                    delay: 9,
                    ease: "power1.inOut"
                })
            }
        },

    },

    mounted() {
        // Initial animation
        this.animatePath(this.pathRefs[0])

        // Set interval for changing devices and animating paths
        setInterval(() => {
            this.currDeviceIndex = (this.currDeviceIndex + 1) % this.pathRefs.length
            this.animatePath(this.pathRefs[this.currDeviceIndex])
        }, 10000)
    }
}
</script>
s